/* =========================================
 * Light Mode Implementation
 * ========================================= */
@media (prefers-color-scheme: light) {
    /* Base Variables */
    @define-color window_bg_color mix(#fafafb, @accent_bg_color, 0.075);
    @define-color view_bg_color mix(#ffffff, @accent_bg_color, 0.075);
    @define-color headerbar_bg_color mix(#ffffff, @accent_bg_color, 0.075);
    @define-color headerbar_backdrop_color mix(#fafafb, @accent_bg_color, 0.075);
    @define-color popover_bg_color mix(#ffffff, @accent_bg_color, 0.075);
    @define-color dialog_bg_color mix(#fafafb, @accent_bg_color, 0.075);
    @define-color card_bg_color mix(#ffffff, @accent_bg_color, 0.04);
    @define-color sidebar_bg_color mix(#ebebed, @accent_bg_color, 0.075);
    @define-color sidebar_backdrop_color mix(#f2f2f4, @accent_bg_color, 0.075);
    @define-color sidebar_border_color mix(rgba(0, 0, 6, 0.07), @accent_bg_color, 0.075);
    @define-color secondary_sidebar_bg_color mix(#f3f3f5, @accent_bg_color, 0.075);
    @define-color secondary_sidebar_backdrop_color mix(#f6f6fa, @accent_bg_color, 0.075);
    @define-color secondary_sidebar_border_color mix(rgba(0, 0, 0, 0.07), @accent_bg_color, 0.075);

    /* Specific Element Overrides (Light) */
    @define-color panel_bg_color @window_bg_color;
    @define-color panel_button_bg_color transparent;
    @define-color panel_hover_bg_color @card_bg_color;

    /* Compatibility Colors (Safety Fallback) */
    @define-color theme_bg_color @window_bg_color;
    @define-color theme_base_color @view_bg_color;
    @define-color theme_selected_bg_color @accent_bg_color;
}

/* =========================================
 * Dark Mode Implementation
 * ========================================= */
@media (prefers-color-scheme: dark) {
    /* Base Variables */
    @define-color window_bg_color mix(#222226, @accent_bg_color, 0.05);
    @define-color view_bg_color mix(#1d1d20, @accent_bg_color, 0.05);
    @define-color headerbar_bg_color mix(#2e2e32, @accent_bg_color, 0.05);
    @define-color headerbar_backdrop_color mix(#222226, @accent_bg_color, 0.05);
    @define-color popover_bg_color mix(#36363a, @accent_bg_color, 0.05);
    @define-color dialog_bg_color mix(#36363a, @accent_bg_color, 0.05);
    @define-color card_bg_color mix(rgba(255, 255, 255, 0.08), @accent_bg_color, 0.05); 
    @define-color sidebar_bg_color mix(#2e2e32, @accent_bg_color, 0.05);
    @define-color sidebar_backdrop_color mix(#28282c, @accent_bg_color, 0.05);
    @define-color sidebar_border_color mix(rgba(0, 0, 0, 0.36), @accent_bg_color, 0.05);
    @define-color secondary_sidebar_bg_color mix(#28282c, @accent_bg_color, 0.05);
    @define-color secondary_sidebar_backdrop_color mix(#252529, @accent_bg_color, 0.05);
    @define-color secondary_sidebar_border_color mix(rgba(0, 0, 0, 0.25), @accent_bg_color, 0.05);

    /* Specific Element Overrides (Dark) */
    @define-color panel_bg_color @window_bg_color;
    @define-color panel_button_bg_color transparent;
    @define-color panel_hover_bg_color @card_bg_color;

    /* Compatibility Colors (Safety Fallback) */
    @define-color theme_bg_color @window_bg_color;
    @define-color theme_base_color @view_bg_color;
    @define-color theme_selected_bg_color @accent_bg_color;
}

/* =========================================
 * Element Styling Rules
 * ========================================= */

/* Force toasts to always use the dark base with white text 
   to match Nautilus's native high-contrast alert style. */
toast {
  background-color: mix(#505053, @accent_bg_color, 0.05);
  color: #ffffff;
}

toggle:checked {
  background-color: @card_bg_color;
}

.inline {
  background-color: rgba(0, 0, 0, 0);
}
